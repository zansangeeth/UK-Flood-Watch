/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{__decorate as t}from"tslib";import{property as r}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/Logger.js";import"../../../core/RandomLCG.js";import{subclass as s}from"../../../core/accessorSupport/decorators/subclass.js";import{isTimeOnlyField as o}from"../../../layers/support/fieldUtils.js";import{isAnyDateField as e}from"../utils.js";import a from"./InMemoryLayerAdapter.js";import{getSummaryStatsQuery as i,getSummaryStatisticsFromFeatureSet as p}from"./support/utils.js";import{processSummaryStatisticsResult as m}from"../../../statistics/utils.js";let c=class extends a{constructor(){super(...arguments),this.adapterName="stream-layer-adapter"}async _summaryStatsFromClientQuery(t,r){const{signal:s,view:a}=t,c=i(this,t,r);c.outStatistics=c.outStatistics?.filter(t=>"totalcount_value"!==t.outStatisticFieldName);const u=await this._fetchFeatureSetFromMemory(c,a,s),l=p(u,e(r)||o(r));return m(l,t.outStatisticTypes)}};t([r({readOnly:!0})],c.prototype,"adapterName",void 0),c=t([s("esri.smartMapping.support.adapters.StreamLayerAdapter")],c);export{c as default};
