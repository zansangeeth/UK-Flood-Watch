/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import e from"../../../core/Error.js";import{Convert3DFailedError as t,MultipleModelsError as s,NoModelError as o}from"../../../layers/graphics/sources/support/uploadAssetErrors.js";import{loadFooterActionsComponents as r,FooterActions as i}from"./FooterActions.js";import{loadPanelContentComponents as l,PanelContent as n,PanelContentSection as a}from"./PanelContent.js";import{loadCalciteComponents as c}from"../../support/componentsUtils.js";import{classes as p}from"../../support/widgetUtils.js";import{tsx as d,tsxFragment as u}from"../../support/jsxFactory.js";import"@arcgis/toolkit/dom";const m="esri-editor__upload-details",f={base:m,status:`${m}__status`,titleWrapper:`${m}__title-wrapper`,title:`${m}__title`,description:`${m}__description`,loader:`${m}__loader`,iconSuccess:`${m}__icon ${m}__icon--success`,iconError:`${m}__icon ${m}__icon--error`,fileList:`${m}__file-list`,file:`${m}__file`,fileIcon:`${m}__file-icon`,fileName:`${m}__file-name`},_=()=>Promise.all([c({icon:()=>import("@esri/calcite-components/dist/components/calcite-icon"),loader:()=>import("@esri/calcite-components/dist/components/calcite-loader")}),r(),l()]);function g(e){const{messages:t,key:s,upload:o}=e;return d(u,null,d(n,{key:s??"upload-details"},d(a,null,y(e))),"error"===o.state?d(i,{buttons:[{onClick:()=>o.retry(),label:t.modelUploads.error.uploadNew,iconStart:"upload-to",type:"button"}],key:"upload-details-footer-actions"}):null)}function y(e){const t=k(e);return t?d("div",{class:f.base,"data-testid":"upload-details",key:"upload-details-content"},d("div",{class:f.status,key:"status"},t.iconContent,d("div",{class:f.titleWrapper,key:"text"},d("div",{class:f.title,key:"title"},t.title),d("div",{class:f.description,key:"description"},t.description))),h(e.upload)):null}function k({helpMessage:e,messages:t,upload:s}){switch(s.state){case"pending":{const{title:e,description:o}=t.modelUploads.pending;return{title:e,description:o,iconContent:d("calcite-loader",{"aria-hidden":"true",class:f.loader,label:"",scale:"s",type:"determinate",value:Math.min(Math.round(100*s.progress),1===s.progress?100:99)})}}case"success":{const{title:s}=t.modelUploads.success;return{title:s,description:e||t.helpMessages3d.mesh,iconContent:d("calcite-icon",{class:p(f.iconSuccess),icon:"check",scale:"l"})}}case"error":{const{title:e}=t.modelUploads.error;return{title:e,description:$(s.error,t),iconContent:d("calcite-icon",{class:p(f.iconError),icon:"exclamation-mark-circle",scale:"l"})}}default:return null}}function $(r,i){if(!r)return null;const l=i.modelUploads.error.messages;switch(r.constructor){case o:return l.noModel;case s:return l.multipleModels;case t:return l.conversionFailed;case e:switch(r.name){case"glt-loader-error":case"gltf-loader-invalid-glb":return l.loadFailed;case"gltf-loader-unsupported-feature":case"mesh-load-external:draco-not-supported":return l.unsupportedFeature;case"glt-loader-request-error":return l.resourceRequestFailed;default:return l.default}default:return l.default}}function h(e){return d("div",{class:f.fileList,key:"file-list"},e.files.map(e=>d("div",{class:f.file,key:`file-${e.name}`},d("calcite-icon",{class:f.fileIcon,icon:j(e),scale:"s"}),d("span",{class:f.fileName},v(e.name)))))}function v(e){return e.split("/").pop()?.split("\\").pop()??""}function j(e){const t=e.name.split(".").pop()?.toLowerCase();return(t?U[t]:null)??b}const b="file",w="file-shape",C="file-image",U={glb:w,gltf:w,jpeg:C,jpg:C,png:C,svg:C,zip:"file-zip"};export{g as UploadDetails,f as css,_ as loadUploadDetailsComponents};
