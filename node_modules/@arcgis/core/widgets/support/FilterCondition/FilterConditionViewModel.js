/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{__decorate as e}from"tslib";import t from"../../../core/Accessor.js";import{watch as i,initial as l}from"../../../core/reactiveUtils.js";import{property as r}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/Logger.js";import"../../../core/RandomLCG.js";import{subclass as o}from"../../../core/accessorSupport/decorators/subclass.js";import{isStringField as s,isNumericField as n,isObjectIDField as a,isGlobalIDField as d,isIntegerField as p,isTimeOnlyField as u,normalizeFieldName as m}from"../../../layers/support/fieldUtils.js";import{defaultOperatorNamesByFieldType as c}from"./conditionUtils.js";let y=class extends t{constructor(e){super(e),this.fieldName=null,this.layer=null,this.operator="is",this.operators=c,this.value=null}initialize(){this.addHandles(i(()=>this.layer,async e=>{e&&!e.loaded&&await e.load()},l))}get domain(){const{fieldName:e,layer:t}=this;if(e&&t)return t.getFieldDomain(e)}get field(){const{fieldName:e,layer:t}=this;if(e&&t)return t.fieldsIndex.get(e)}get fields(){return(this.layer?.fields??[]).filter(e=>!!(s(e)||n(e)||a(e)||d(e)))}get fieldLabel(){const{field:e}=this;return e&&(e.alias||e.name)||""}get isObjectIDField(){const{field:e}=this;return!!e&&a(e)}get isGlobalIDField(){const{field:e}=this;return!!e&&d(e)}get isIntegerField(){return p(this.field)}get isNumericField(){return n(this.field)}get isStringField(){return s(this.field)}get isTimeOnlyField(){return u(this.field)}get normalizedFieldName(){return m(this.field?.name)}get state(){const{layer:e}=this;return e?e.loaded?"ready":"loading":"disabled"}get valueAsString(){const{value:e}=this;return null==e||""===e?"":`${e}`}get normalizedValue(){const{value:e,isNumericField:t,isObjectIDField:i}=this;return null==e||""===e?"":t||i?`${e}`:`'${e}'`}get whereClause(){const{normalizedFieldName:e,operator:t,normalizedValue:i}=this;return e&&t?"isBlank"===t?`${e} IS NULL`:"isNotBlank"===t?`${e} IS NOT NULL`:"isEmpty"===t?`${e} = ''`:"isNotEmpty"===t?`${e} <> ''`:""===i?null:"is"===t?`${e} = ${i}`:"isNot"===t?`${e} <> ${i}`:"startsWith"===t?`${e} LIKE ${i}%`:"endsWith"===t?`${e} LIKE %${i}`:"contains"===t?`${e} LIKE %${i}%`:"doesNotContain"===t?`${e} NOT LIKE %${i}%`:null:null}};e([r()],y.prototype,"domain",null),e([r()],y.prototype,"field",null),e([r()],y.prototype,"fields",null),e([r()],y.prototype,"fieldLabel",null),e([r()],y.prototype,"fieldName",void 0),e([r()],y.prototype,"isObjectIDField",null),e([r()],y.prototype,"isIntegerField",null),e([r()],y.prototype,"isNumericField",null),e([r()],y.prototype,"isStringField",null),e([r()],y.prototype,"isTimeOnlyField",null),e([r()],y.prototype,"layer",void 0),e([r()],y.prototype,"normalizedFieldName",null),e([r()],y.prototype,"operator",void 0),e([r()],y.prototype,"operators",void 0),e([r()],y.prototype,"state",null),e([r()],y.prototype,"value",void 0),e([r()],y.prototype,"valueAsString",null),e([r()],y.prototype,"normalizedValue",null),e([r()],y.prototype,"whereClause",null),y=e([o("esri.widgets.support.FilterCondition.FilterConditionViewModel")],y);export{y as default};
