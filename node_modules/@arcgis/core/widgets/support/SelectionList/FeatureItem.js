/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{__decorate as t}from"tslib";import{isSome as e}from"../../../core/arrayUtils.js";import{property as r}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/Logger.js";import{subclass as i}from"../../../core/accessorSupport/decorators/subclass.js";import{fetchThumbnail as o}from"../symbolPreviewUtils.js";import l from"./ItemBase.js";let s=class extends l{constructor(t){super(t),this._thumbnail=null,this.graphic=null,this.layer=null,this.layerItem=null,this.thumbnailSize=24}get _filterTerms(){return[this.title,this.layerItem.title,this.layerItem.groupLayerItem?.title].filter(e)}get key(){return`${this.layer.id}:${this.objectId??this.graphic.uid}`}get objectId(){return this.graphic.getObjectId()}get title(){const{objectId:t}=this;if(null!=t)return this.layerItem.featureTitleMap.get(t)||`${t}`}get thumbnail(){return this._thumbnail??void 0}get thumbnailKey(){return`${this.key}-${this.graphic.uid}`}get visible(){const{_filterTerms:t,viewModel:{activeLayerItem:e,filterText:r}}=this;if(e&&e.layer!==this.layer)return!1;if(null==r||""===r||!t.length)return!0;const i=new RegExp(r,"iu");return t.some(t=>i.test(t))}async fetchThumbnail(t){return this._thumbnail=await o(this.graphic,this.layer,{maxSize:this.thumbnailSize,ariaLabel:t?.ariaLabel})}};t([r()],s.prototype,"_filterTerms",null),t([r()],s.prototype,"_thumbnail",void 0),t([r()],s.prototype,"graphic",void 0),t([r()],s.prototype,"key",null),t([r()],s.prototype,"layer",void 0),t([r()],s.prototype,"layerItem",void 0),t([r()],s.prototype,"objectId",null),t([r()],s.prototype,"title",null),t([r()],s.prototype,"thumbnail",null),t([r()],s.prototype,"thumbnailKey",null),t([r()],s.prototype,"thumbnailSize",void 0),t([r()],s.prototype,"visible",null),s=t([i("esri.widgets.support.SelectionList.FeatureItem")],s);const a=s;export{a as default};
