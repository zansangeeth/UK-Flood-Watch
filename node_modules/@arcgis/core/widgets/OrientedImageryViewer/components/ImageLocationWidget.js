/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{__decorate as e}from"tslib";import{property as t}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/Logger.js";import"../../../core/RandomLCG.js";import{subclass as c}from"../../../core/accessorSupport/decorators/subclass.js";import{substitute as o}from"../../../intl/substitute.js";import a from"../../Widget.js";import{css as n}from"../css.js";import{copyToClipboard as l}from"../imageMeasurementUtils.js";import{loadCalciteComponents as r}from"../../support/componentsUtils.js";import{tsx as i}from"../../support/jsxFactory.js";import{messageBundle as s}from"../../support/decorators/messageBundle.js";let m=class extends a{constructor(e){super(e),this.messages=null,this.messagesCommon=null,this.accuracy=null,this._selectedSystem="Basemap",this._handleSystemSelection=e=>{this._selectedSystem=e.target.value}}loadDependencies(){return r({action:()=>import("@esri/calcite-components/dist/components/calcite-action"),block:()=>import("@esri/calcite-components/dist/components/calcite-block"),panel:()=>import("@esri/calcite-components/dist/components/calcite-panel"),select:()=>import("@esri/calcite-components/dist/components/calcite-select"),option:()=>import("@esri/calcite-components/dist/components/calcite-option"),table:()=>import("@esri/calcite-components/dist/components/calcite-table"),"table-row":()=>import("@esri/calcite-components/dist/components/calcite-table-row"),"table-header":()=>import("@esri/calcite-components/dist/components/calcite-table-header"),"table-cell":()=>import("@esri/calcite-components/dist/components/calcite-table-cell")})}get _renderLocationBlock(){const{groundCoordinates:e,_selectedSystem:t}=this;return e&&"XY"===t?i("calcite-block",{heading:this.getLocation(),headingLevel:6}):null}get _renderLocationTable(){const{groundCoordinates:e,messages:t,_selectedSystem:c,accuracy:o}=this,a={groundX:e.x.toFixed(3),accuracyX:null!=o?.x?o.x.toFixed(3):"",groundY:e.y.toFixed(3),accuracyY:null!=o?.y?o.y.toFixed(3):"",groundZ:e.z?e.z.toFixed(3):"",accuracyZ:null!=o?.z?o.z.toFixed(3):""};return e&&"Basemap"===c?i("calcite-table",{bordered:!0,caption:t.measurementTable,class:n.measurementsTable,scale:"s"},i("calcite-table-row",{slot:"table-header"},i("calcite-table-header",{alignment:"center",heading:t.type}),i("calcite-table-header",{alignment:"center",heading:t.value}),i("calcite-table-header",{alignment:"center",heading:t.accuracy})),i("calcite-table-row",null,i("calcite-table-cell",{alignment:"center"},t.x),i("calcite-table-cell",{alignment:"center"},a.groundX),i("calcite-table-cell",{alignment:"center"},a.accuracyX)),i("calcite-table-row",null,i("calcite-table-cell",{alignment:"center"},t.y),i("calcite-table-cell",{alignment:"center"},a.groundY),i("calcite-table-cell",{alignment:"center"},a.accuracyY)),i("calcite-table-row",null,i("calcite-table-cell",{alignment:"center"},t.z),i("calcite-table-cell",{alignment:"center"},a.groundZ),i("calcite-table-cell",{alignment:"center"},a.accuracyZ))):null}get _renderSystemSelect(){const{messages:e,messagesCommon:t,groundCoordinates:c}=this,o="feet"===c.spatialReference.unit?e.xyzFeet:e.xyz;return i("div",{class:n.measurementsBar},i("calcite-select",{bind:this,label:e.selectUnitSystem,scale:"m",width:"full",onCalciteSelectChange:this._handleSystemSelection},i("calcite-option",{value:"Basemap"},o),i("calcite-option",{value:"XY"},e.decimalDegrees)),i("calcite-action",{icon:"copy-to-clipboard",onclick:()=>this.copyLocation(),scale:"s",slot:"control",text:"Copy",title:t.copy}))}copyLocation(){const{groundCoordinates:e}=this;if(!e)return;const t=this.getLocation();t&&l(t)}getLocation(){const{_selectedSystem:e,groundCoordinates:t,accuracy:c}=this;return"Basemap"===e?this.getBasemapLocation(t,c):this.getXYLocation(t)}getXYLocation(e){if(null==e?.longitude||null==e?.latitude)return"";const t={groundX:e.longitude.toFixed(6),groundY:e.latitude.toFixed(6)};return o("{groundX}° , {groundY}°",t)}getBasemapLocation(e,t){if(null==e?.x||null==e?.y)return"";const c={groundX:e.x.toFixed(3),accuracyX:t?.x?t.x.toFixed(3):0,groundY:e.y.toFixed(3),accuracyY:t?.y?t.y.toFixed(3):0,groundZ:e.z?e.z.toFixed(3):0,accuracyZ:t?.z?t.z.toFixed(3):0};return o("{groundX} ± {accuracyX},  {groundY} ± {accuracyY}, {groundZ} ± {accuracyZ}",c)}render(){return i("calcite-panel",{class:n.measurementResults,key:"ground-location-container"},this._renderSystemSelect,this._renderLocationBlock,this._renderLocationTable)}};e([t()],m.prototype,"messages",void 0),e([t(),s("esri/t9n/common")],m.prototype,"messagesCommon",void 0),e([t()],m.prototype,"groundCoordinates",void 0),e([t()],m.prototype,"accuracy",void 0),e([t()],m.prototype,"_selectedSystem",void 0),e([t()],m.prototype,"_renderLocationBlock",null),e([t()],m.prototype,"_renderLocationTable",null),e([t()],m.prototype,"_renderSystemSelect",null),m=e([c("esri.widgets.OrientedImageryViewer.components.ImageLocationWidget")],m);const d=m;export{d as default};
