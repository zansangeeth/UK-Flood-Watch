/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import s from"../../../request.js";import i from"../../../core/Error.js";import{parseUrl as r,asValidOptions as t,encode as o}from"../../utils.js";import{addServerVersion as e}from"./serverVersionUtils.js";const n=new Map;async function c(c,f,p,a){n.has(c)||await e(n,c);const m=n.get(c);if((m?.serverVersion??0)<=11.1)throw new i("inspectConflicts:enterprise-version","versioning API requires ArcGIS Enterprise version 11.2 or higher");if(!f)throw new i("inspectConflicts:missing-guid","guid for version is missing");const u=r(c),l=p.toJSON();l.conflicts&&(l.conflicts=JSON.stringify(p.conflicts));const g=t(u.query,{query:o({...l,f:"json"}),...a,method:"post"});f.startsWith("{")&&(f=f.slice(1,-1));const h=`${u.path}/versions/${f}/inspectConflicts`,{data:v}=await s(h,g);return v.success}export{c as inspectConflicts,n as serverVersionCacheMap};
